@page "/Error"
@using System.Diagnostics
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]
@layout Layout.PublicLayout

<PageTitle>Error - Underwriting Analyst</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-16">
    <MudStack AlignItems="AlignItems.Center" Spacing="4">
        <MudIcon Icon="@Icons.Material.Filled.ErrorOutline" Size="Size.Medium"
                 Style="color: #D32F2F;" />
        <MudText Typo="Typo.h4" Style="font-weight: 700; color: #1A2332;">
            Something went wrong
        </MudText>
        <MudText Typo="Typo.body1" Align="Align.Center" Style="color: #6B7280;">
            An error occurred while processing your request. Please try again.
        </MudText>

        @if (ShowRequestId)
        {
            <MudAlert Severity="Severity.Info" Variant="Variant.Outlined" Dense="true">
                <strong>Request ID:</strong> @RequestId
            </MudAlert>
        }

        <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/search"
                   StartIcon="@Icons.Material.Filled.Home"
                   Style="text-transform: none; font-weight: 500;">
            Return to Dashboard
        </MudButton>
    </MudStack>
</MudContainer>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
